""""""""""""""""""""""""""""""""""""
" => Plug Mapping Start
""""""""""""""""""""""""""""""""""""

""""""""""""""""""""""""""""""""""""
" => nerd Tree
map <leader>nn :NERDTreeToggle<cr>
map <leader>nb :NERDTreeFromBookmark<Space>
map <leader>nf :NERDTreeFind<cr>

" quick edit
" 快速注释
map <leader><space> :FixWhitespace<cr>

" easyalign 
vmap <Leader>a <Plug>(EasyAlign)
nmap <Leader>a <Plug>(EasyAlign)

""""""""""""""""""""""""""""""""""""
" ==> auto Complete
" mappings
nnoremap <silent> <space><space> :<C-u>CocFzfList<CR>
nnoremap <silent> <space>a       :<C-u>CocFzfList dwagnostics<CR>
nnoremap <silent> <space>b       :<C-u>CocFzfList diagnostics --current-buf<CR>
nnoremap <silent> <space>c       :<C-u>CocFzfList commands<CR>
nnoremap <silent> <space>e       :<C-u>CocFzfList extensions<CR>
nnoremap <silent> <space>l       :<C-u>CocFzfList location<CR>
nnoremap <silent> <space>o       :<C-u>CocFzfList outline<CR>
nnoremap <silent> <space>s       :<C-u>CocFzfList symbols<CR>
nnoremap <silent> <space>p       :<C-u>CocFzfListResume<CR>
nmap <leader>tt <Plug>(coc-terminal-toggle)
nnoremap <LEADER>h :call Show_documentation()<CR>


nnoremap <silent><nowait> <LEADER>d :CocList diagnostics<cr>
nmap <silent> <LEADER>- <Plug>(coc-diagnostic-prev)
nmap <silent> <LEADER>= <Plug>(coc-diagnostic-next)
nnoremap <c-c> :CocCommand<CR>
" Text Objects
xmap kf <Plug>(coc-funcobj-i)
xmap af <Plug>(coc-funcobj-a)
omap kf <Plug>(coc-funcobj-i)
omap af <Plug>(coc-funcobj-a)
xmap kc <Plug>(coc-classobj-i)
omap kc <Plug>(coc-classobj-i)
xmap ac <Plug>(coc-classobj-a)
omap ac <Plug>(coc-classobj-a)
" Useful commands

" Use `[g` and `]g` to navigate diagnostics
" Use `:CocDiagnostics` to get all diagnostics of current buffer in location list.
nmap <silent> [g <Plug>(coc-diagnostic-prev)
nmap <silent> ]g <Plug>(coc-diagnostic-next)

nnoremap <silent> <space>y :<C-u>CocList -A --normal yank<cr>
nmap <silent> <leader>gd <Plug>(coc-definition)
nmap <silent> <leader>gy <Plug>(coc-type-definition)
" nmap <silent> gi <Plug>(coc-implementation)
nmap <silent> <leader>gr <Plug>(coc-references)
nmap <leader>rn <Plug>(coc-rename)
nmap tt :CocCommand explorer<CR>
" coc-translator
nmap ts <Plug>(coc-translator-p)
" Remap for do codeAction of selected region
function! s:cocActionsOpenFromSelected(type) abort
  execute 'CocCommand actions.open ' . a:type
endfunction
xmap <leader>a  <Plug>(coc-codeaction-selected)
nmap <leader>aw  <Plug>(coc-codeaction-selected)w
" coctodolist
" nnoremap <leader>tn :CocCommand todolist.create<CR>
" nnoremap <leader>tl :CocList todolist<CR>
" nnoremap <leader>tu :CocCommand todolist.download<CR>:CocCommand todolist.upload<CR>
" coc-tasks
noremap <silent> <leader>ts :CocList tasks<CR>
" coc-snippets
imap <C-l> <Plug>(coc-snippets-expand)
vmap <C-e> <Plug>(coc-snippets-select)
let g:coc_snippet_next = '<c-e>'
let g:coc_snippet_prev = '<c-n>'
imap <C-e> <Plug>(coc-snippets-expand-jump)


"""""""""""""""""""""""""""""""""""
" => 符号对齐
nmap <leader>tl :TlistToggle<cr> 

" ===
" === FZF
" ===
" nnoremap <c-p> :leaderf file<cr>
" noremap <silent> <c-p> :files<cr>
" noremap <silent> <c-f> :rg<cr>
" noremap <silent> <c-h> :history<cr>
"noremap <c-t> :btags<cr>
" noremap <silent> <c-l> :lines<cr>
noremap <silent> <space>b :buffers<cr>
noremap <leader>; :history:<cr>
noremap <c-d> :BD<CR>
noremap <leader>m :Maps<CR>
noremap <silent> <Space>ta :Tags<CR>
noremap <silent> <Space>tb :BTags<CR>

" ===
" === Leaderf
" ===
let g:Lf_ShortcutF = "<leader>ff"
noremap <leader>fb :<C-U><C-R>=printf("Leaderf buffer %s", "")<CR><CR>
noremap <leader>fm :<C-U><C-R>=printf("Leaderf mru %s", "")<CR><CR>
noremap <leader>ft :<C-U><C-R>=printf("Leaderf bufTag %s", "")<CR><CR>
noremap <leader>fl :<C-U><C-R>=printf("Leaderf line %s", "")<CR><CR>
noremap <leader>fa :<C-U><C-R>=printf("Leaderf tag %s", "")<CR><CR>

noremap <C-B> :<C-U><C-R>=printf("Leaderf! rg --current-buffer -e %s ", expand("<cword>"))<CR>
noremap <C-F> :<C-U><C-R>=printf("Leaderf! rg -e %s ", expand("<cword>"))<CR>
" search visually selected text literally
xnoremap gf :<C-U><C-R>=printf("Leaderf! rg -F -e %s ", leaderf#Rg#visual())<CR>
noremap go :<C-U>Leaderf! rg --recall<CR>
noremap <leader>fr :<C-U><C-R>=printf("Leaderf! gtags -r %s --auto-jump", expand("<cword>"))<CR><CR>
noremap <leader>fd :<C-U><C-R>=printf("Leaderf! gtags -d %s --auto-jump", expand("<cword>"))<CR><CR>
noremap <leader>fo :<C-U><C-R>=printf("Leaderf! gtags --recall %s", "")<CR><CR>
noremap <leader>fn :<C-U><C-R>=printf("Leaderf gtags --next %s", "")<CR><CR>
noremap <leader>fp :<C-U><C-R>=printf("Leaderf gtags --previous %s", "")<CR><CR>
let g:Lf_CommandMap = {
\   '<C-k>': ['<C-u>'],
\   '<C-j>': ['<C-e>'],
\   '<C-]>': ['<C-v>'],
\   '<C-p>': ['<C-n>'],
\}

nmap <leader>mp :<Plug>MarkdownPreview <cr> 
nmap <leader>ms :<Plug>MarkdownPreviewStop <cr>
nmap <leader>mt :<Plug>MarkdownPreviewToggle <cr>


""""""""""""""""""""""""""""""""""""
" ==> dashboard
nmap <Leader>ss :<C-u>SessionSave<CR>
nmap <Leader>sl :<C-u>SessionLoad<CR>

""""""""""""""""""""""""""""""""""""
" ==> gutentags
noremap <silent> <SPACE>gs :GscopeFind s <C-R><C-W><cr>
noremap <silent> <SPACE>gg :GscopeFind g <C-R><C-W><cr>
noremap <silent> <SPACE>gc :GscopeFind c <C-R><C-W><cr>
noremap <silent> <SPACE>gt :GscopeFind t <C-R><C-W><cr>
noremap <silent> <SPACE>ge :GscopeFind e <C-R><C-W><cr>
noremap <silent> <SPACE>gf :GscopeFind f <C-R>=expand("<cfile>")<cr><cr>
noremap <silent> <SPACE>gi :GscopeFind i <C-R>=expand("<cfile>")<cr><cr>
noremap <silent> <SPACE>gd :GscopeFind d <C-R><C-W><cr>
noremap <silent> <SPACE>ga :GscopeFind a <C-R><C-W><cr>
noremap <silent> <SPACE>gz :GscopeFind z <C-R><C-W><cr>
""""""""""""""""""""""""""""""""""""
" => Plug Mapping end
""""""""""""""""""""""""""""""""""""
